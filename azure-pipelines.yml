trigger:
  - main

stages:
  - stage: Build
    displayName: Build Package
    jobs:
    - job: BuildPackage
      pool: AzureDevOpsAgent01
      steps:
         
      - task: UiPathPack@2
        inputs:
          versionType: 'AutoVersion'
          projectJsonPath: '$(Build.SourcesDirectory)\project.json'
          outputType: 'Process'
          orchestratorConnection: 'AzureDevOpsSCC'
          outputPath: '$(Build.ArtifactStagingDirectory)'


#- task: UiPathPack@2
#  inputs:
    #versionType: AutoVersion # Options: AutoVersion, CurrentVersion, ManualVersion 
    #version: '1.0.0' # Required when versionType == ManualVersion
    #projectJsonPath: '$(Build.SourcesDirectory)\MyFirstProcess'
    #outputPath: '$(Build.ArtifactStagingDirectory)\Packages\MyFirstProcess'
    #outputType: 'None' # Options: Process, Library, Tests, Objects, None
    #runWorkflowAnalysis: 'False'
    #orchestratorConnection: 'service-connection-name' # Service connection to UiPath Orchestrator,
    #traceLevel: 'None' # Options: Critical, Error, Warning, Information, Verbose, None

  - stage: Assets
    displayName: Create Assets
    jobs:
    - job: CreateAssets
      pool: AzureDevOpsAgent01
      steps:
         
      - task: UiPathAssets@2
        inputs:
          orchestratorConnection: 'AzureDevOpsSCC'
          folderName: 'Non-Production/RPA CoE'
          assetActionType: 'Deploy'
          csvFile: '$(Build.SourcesDirectory)\Data\Assets.csv'


#- task: UiPathAssets@2
 # displayName: 'Deploy/Update assets'
  #inputs:
    #orchestratorConnection: 'service-connection-name' # Service connection to UiPath Orchestrator
    #assetActionType: 'Deploy' # Options: Deploy, Delete
    #csvFile: 'assets_deploy.csv' # the path to the csv file containing the assets description,
    #traceLevel: 'None' # Options: Critical, Error, Warning, Information, Verbose, None